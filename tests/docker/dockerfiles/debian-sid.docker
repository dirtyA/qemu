#
# Docker sid/ports base packages
#
# This docker target uses the current unstable version of Debian as
# a base for building QEMU for architectures yet to have an official
# port.
#
# On its own you can't build much but the docker-foo-cross targets
# build on top of the base debian image.
#
FROM docker.io/library/debian:sid-slim

# Add ports
RUN apt update && \
    DEBIAN_FRONTEND=noninteractive apt install -yy  eatmydata
RUN DEBIAN_FRONTEND=noninteractive eatmydata \
    apt install -yy debian-ports-archive-keyring

RUN echo "deb http://ftp.ports.debian.org/debian-ports/ sid main" >> /etc/apt/sources.list

# Duplicate deb line as deb-src
RUN cat /etc/apt/sources.list | sed "s/^deb\ /deb-src /" >> /etc/apt/sources.list

# Install common build utilities
RUN DEBIAN_FRONTEND=noninteractive eatmydata \
    apt upgrade -yy
RUN DEBIAN_FRONTEND=noninteractive eatmydata apt install -yy \
    binutils \
    dpkg-dev \
    make \
    ninja-build \
    python3 \
    pkg-config
